<div class="px-3 border <%= @truck.status? ? "border-info" : "" %> border-2 pt-3 pb-3 mb-3" style="border-radius: 0.75rem;">
  <div class="d-flex px-1 justify-content-between">
    <div class="d-flex text-truncate" style="width: 50%">
      <p class="m-0"><%= image_tag "countries/#{@truck.pickup.country}.svg", style: "width: 1.15rem; border-radius: 2rem; margin-bottom: 0.15rem; margin-right: 0.3rem;" %></p>
      <p class="my-0 fw-bolder text-truncate"><%= @truck.pickup.simple %></p>
    </div>
    <div class="d-flex justify-content-end text-truncate" style="width: 50%">
      <p class="m-0 text-end fw-bolder text-truncate"><%= @truck.dropoff.simple %></p>
      <p class="m-0"><%= image_tag "countries/#{@truck.dropoff.country}.svg", style: "width: 1.15rem; border-radius: 1rem; margin-bottom: 0.15rem; margin-left: 0.3rem;" %></p>
    </div>
  </div>

  <p class="mt-2 px-1 text-muted mb-0"><small>
    <%= @truck.loading_date.try(:strftime, ("%b %e")) %>;
    <% @truck.truck_type.drop(1).each do |truck| %>
      <%= truck %>;
    <% end %>
    <%= @truck.length %> m;
    <% if @truck.weight? %>
      <%= @truck.weight.to_i %> t;
    <% end %>
  </small></p>

  <% if policy(@truck).edit? %>
    <% if @truck.status? %>
      <div class="row mt-2 g-2">
        <div class="col-lg-4">
          <% if @truck.type == "Load" %>
          <%= link_to edit_load_path, "data-turbo" => "false", class: "btn btn-sm bg-info border-0 text-truncate btn-outline-primary w-100", style: "border-radius: 0.25rem;" do %>
            <i class="fa fa-solid fa-pen text-primary"></i> Ð˜Ð·Ð¼ÐµÐ½Ð¸ Ñ„Ð¸Ð»Ñ‚Ñ€Ð¸
          <% end %>
          <% else %>
          <%= link_to edit_truck_path, "data-turbo" => "false", class: "btn btn-sm bg-info border-0 text-truncate btn-outline-primary w-100", style: "border-radius: 0.25rem;" do %>
            <i class="fa fa-solid fa-pen text-primary"></i> Ð˜Ð·Ð¼ÐµÐ½Ð¸ Ñ„Ð¸Ð»Ñ‚Ñ€Ð¸
          <% end %>
          <% end %>
        </div>
        <div class="col-lg-4">
          <%= mail_to("",
            :subject => "#{@truck.type == "Load" ? "Ð‘Ð°Ñ€Ð°Ð¼ ÐºÐ°Ð¼Ð¸Ð¾Ð½" : "Ð‘Ð°Ñ€Ð°Ð¼ Ñ‚Ð¾Ð²Ð°Ñ€"}",
            :body => "Ð—Ð´Ñ€Ð°Ð²Ð¾!\r\n\r\nÐ‘Ð°Ñ€Ð°Ð¼ #{@truck.type == "Truck" ? "Ñ‚Ð¾Ð²Ð°Ñ€" : "ÐºÐ°Ð¼Ð¸Ð¾Ð½" } Ð¾Ð´ #{@truck.pickup.simple} Ð´Ð¾ #{@truck.dropoff.simple}.\r\n\r\nÐŸÐ¾Ð²ÐµÑœÐµ Ð´ÐµÑ‚Ð°Ð»Ð¸ Ð½Ð°Ñ˜Ð´ÐµÑ‚Ðµ Ð¾Ð²Ð´Ðµ ðŸ‘‡ðŸ»\r\n\r\n#{request.original_url}\r\n\r\nÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²,\r\n\r\n#{current_user.first_name}\r\n\r\nÐžÐ²Ð¾Ñ˜ Ð¼ÐµÑ˜Ð» Ð³Ð¾ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð°Ð² Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚ÑÐºÐ¸ Ð¿Ñ€ÐµÐºÑƒ Cargster.co",
            class: "btn btn-sm bg-info border-0 btn-outline-primary text-truncate w-100", style: "border-radius: 0.25rem;") do
          %>
            <i class="fa fa-solid fa-envelope text-primary"></i> Ð¡Ð¿Ð¾Ð´ÐµÐ»Ð¸ Ð¿Ð¾ Ðµ-Ð¿Ð¾ÑˆÑ‚Ð°
          <% end %>
        </div>
        <div class="col-lg-4">
          <% if @truck.type == "Load" %>
          <%= link_to change_load_status_path(@truck), data: { turbo_confirm: 'ÐžÐ²Ð°Ð° Ð°ÐºÑ†Ð¸Ñ˜Ð° Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð´Ð° Ñ˜Ð° Ð²Ñ€Ð°Ñ‚Ð¸Ñ‚Ðµ. Ð”Ð°Ð»Ð¸ ÑÑ‚Ðµ ÑÐ¸Ð³ÑƒÑ€Ð½Ð¸?', turbo_method: :patch }, class:"btn btn-sm bg-warning text-danger border-0 btn-danger text-truncate w-100", style: "border-radius: 0.25rem;" do %>
            <i class="fa fa-solid fa-times text-danger"></i> Ð”ÐµÐ°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð°Ñ˜
          <% end %>
          <% else %>
          <%= link_to change_truck_status_path(@truck), data: { turbo_confirm: 'ÐžÐ²Ð°Ð° Ð°ÐºÑ†Ð¸Ñ˜Ð° Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð´Ð° Ñ˜Ð° Ð²Ñ€Ð°Ñ‚Ð¸Ñ‚Ðµ. Ð”Ð°Ð»Ð¸ ÑÑ‚Ðµ ÑÐ¸Ð³ÑƒÑ€Ð½Ð¸?', turbo_method: :patch }, class:"btn btn-sm bg-warning text-danger border-0 btn-danger text-truncate w-100", style: "border-radius: 0.25rem;" do %>
            <i class="fa fa-solid fa-times text-danger"></i> Ð”ÐµÐ°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð°Ñ˜
          <% end %>
          <% end %>
        </div>
      </div>
    <% else %>
      <%= render 'shared/post_inactive' %>
    <% end %>
  <% end %>
</div>
